# Beans-Journal

## Описание
**Beans-Journal** — это микросервис для хранения и предоставления уведомлений пользователей. Сервис обрабатывает события о создании и обновлении заказов, изменении бонусных баллов и регистрирует приветственные сообщения для новых пользователей. Уведомления доступны через REST API.

## Ключевые функции
- Хранение уведомлений пользователей:
    - Приветствие при регистрации.
    - Уведомления о создании и обновлении заказов.
    - Уведомления о начислении и списании бонусов.
- Обработка асинхронных событий из Kafka.
- REST API для получения списка уведомлений по пользователю.

## Требования по инфраструктуре
- **База данных**: MongoDB (документная база данных).  
  Требуется установленная и настроенная MongoDB, порт по умолчанию: `27017`.
- **Очередь сообщений**: Apache Kafka.  
  Минимум один брокер Kafka для обработки событий.
- **Java**: версия 17 или выше.
- **Maven**: для сборки проекта.

## Технологии
- **Язык**: Kotlin
- **Фреймворки**: Spring Boot (Web, Data MongoDB, Kafka)
- **Паттерны**: CQRS, Event-driven
- **База данных**: MongoDB

## Инструкция по сборке и установке

### 1. Клонирование репозитория
```bash
git clone https://github.com/your-repo/beans-journal.git
cd beans-journal
```
2. Настройка конфигурации

Создайте файл application.yml в папке src/main/resources и укажите настройки для MongoDB и Kafka:

    spring:
      data:
        mongodb:
          uri: mongodb://localhost:27017/beans_journal
      kafka:
        consumer:
          bootstrap-servers: localhost:9092
          group-id: beans-journal-group

3. Сборка проекта

Соберите проект с помощью Gradle:

    gradlew clean build

## **API**

**Получение уведомлений пользователя**

GET /journal
Возвращает список уведомлений, отсортированных по дате (новые сверху).

**Асинхронные взаимодействия**


    ProfileCreated: приветственное уведомление.
    OrderCreated: уведомление о создании заказа.
    OrderUpdated: уведомление об обновлении статуса заказа.
    LoyaltyUpdated: уведомление о начислении/списании бонусных баллов.